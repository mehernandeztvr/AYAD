---
title: "Introduccion a RStudio"
author: "Maru Hernandez"
date: "2023-08-17"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


#Librerias
```{r}
#install.packages("package_name")
library(readxl)
library(MASS)
library(stats) 
library(psych)
library(dplyr)
library(xlsx)
library(openxlsx)
```



```{r}
w <- c("Windows", "Mac", "UNIX")
x <- 100000
y <- 1:10
z <- c(TRUE, TRUE, FALSE, FALSE)

class(y)
typeof(y)
attributes(y)
length(y)

```



```{r}
gender <- c("Male","Female","Female","Male","Female")
gender.factor <- factor(gender,levels=c("Male","Female"))
str(gender.factor)

vector("integer", length = 5)
#palabras
```

#estucturas
```{r}
#Matrices
x <- 1:3 
y <- 10:12
cbind(x, y)
rbind(x, y)

mdat <- matrix(c(1, 2, 3, 11, 12, 13),
               nrow = 2, 
               ncol = 3, 
               byrow = TRUE)


```

```{r}
a <- list(1, "a", TRUE, 1+4i)
a
a[[2]]

b <- vector("list", length = 5) # lista vacia
b
length(b)

dat <- data.frame(id = letters[1:10], column1 = 1:10, column2 = 11:20)
dat

```


```{r}
library(readxl)
library(xlsx)
library(openxlsx)

Base=read_excel("TVPrueba.xlsx")
Base
```

```{r}
class(Base)
class(Base$Fecha)
```

#Manipulación de Data Frames
```{r}
#library(stats)
library(dplyr)
library(MASS)
#Selección


#Si no corre, indicamos la libreria del cual tomar la función
S=Base%>%dplyr::select(Dia,TV.Open,TV.Close)
S

```

```{r}
#Filter: Analizar cuales precios son mayor a 
F=filter(S,TV.Close<10)
F2=filter(S,Dia=="Lunes")

F2
```

```{r}
#Ordenar datos
arrange(F,TV.Close)
arrange(F,desc(TV.Close))
```

#Resumen
```{r}
Su=summarise(F, Mean.PriceClose=mean(TV.Close))
Su2=describe(F$TV.Close)
Su
Su2
```

#Plot
```{r}
P=plot(F$TV.Close, type="l",main = "Precio")
```

# TEMA 2

## Librerias
```{r}
library(readxl)
library(MASS)
library(stats)
library(psych)
library(dplyr)
library(ggplot2)
```

## DB
```{r}
library(ggplot2)
BaseAlfa=read_xlsx("Alfa.xlsx")
summary(BaseAlfa)
```

## Datos Faltantes
##Imputacion o sustituir por la media
1. Estimamos una base de datos sin NA
2. Estimamos el promedio de la variable SIN los datos faltantes
3. sustituimos la media en la variable con NA de la base original

```{r}
Alfa.SNA=na.omit(BaseAlfa)

Media_Precio_Alfa=mean(Alfa.SNA$ALFAA.MX.Close)

BaseAlfa$ALFAA.MX.Close[is.na(BaseAlfa$ALFAA.MX.Close)]=Media_Precio_Alfa

summary(BaseAlfa)

```


##ggplot
1. Estructura
2. Agregamos una capa de informacion/ las variables
3. Agregar mayor detalle

```{r}
ggplot(BaseAlfa)
```

```{r}
ggplot( BaseAlfa) +
geom_point(aes(x = Fecha, y = ALFAA.MX.Close))
```


```{r}
ggplot( BaseAlfa) +
geom_point(aes(x = Fecha, y = ALFAA.MX.Close,col=Dia))
```

```{r}
ggplot( BaseAlfa) +
geom_point(aes(x = Fecha, y = ALFAA.MX.Close,col=Dia) )+
labs(title='Precio de cierre', x='Fecha', y='Precio Cierre')
```



# Valores Dummy y Condicionales
```{r}
#IF
x = 3
if(x > 0){
print("Número positivo")
}
```

```{r}
#IFELSE
x <- 5
if(x > 0){
print("Número positivo")
} else {print("Número negativo")
}


#IFELSE
num<-1:10
ifelse(num %% 2==0, "PAR", "IMPAR")
```


## LOOP
```{r}
v1<- rnorm(10)
print("Este loop calcula la raiz cuadrada de 5 numeros aleatorios dentro del vector v1")

usq<-0
for(i in 1:5){
  #i: valor que cambia dentro del loop, en este caso del 1 al 5
  usq[i]<-v1[i]*v1[i]
  print(usq[i])
}
  print(i)
```

## Dummy Values
```{r}
Riesgo=read_xlsx("Riesgo.xlsx")
Riesgo%>% mutate(Dummy_Risk=ifelse(ROE>Tasa,0,1))
```



